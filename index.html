<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Andela Room Bookings</title>

	<link rel="stylesheet" href="./css/main.css">
	<script src="js/bookingApp.js"></script>
	<script src="js/roomType.js"></script>

	<script>
		function getAvailableRoom() {

			// get all rooms from bookingApp.js
			var all_rooms = getAllRooms();

			// get room name from the dropdown
			var room_name = document.getElementById("find-rooms").value;

			// get available rooms
			var available_rooms = JSON.parse(roomType(room_name, all_rooms));

			// build table header
			var output = "<tr><th width='10%'>Room No</th><th width='20%'>Room Name</th><th width='15%'>Capacity</th><th width='45%'>Features</th><th width='10%'>Available</th></tr>";

			// get total count
			var count = 0;

			// get each room
			for(var room in available_rooms){

				// Build the output
				output += "<tr>";
				output += "<td>" + available_rooms[room].id + "</td>"
				output += "<td>" + available_rooms[room].room_number + "</td>";
				output += "<td>" + available_rooms[room].capacity + "</td>";
				output += "<td>" + available_rooms[room].features + "</td>";
				output += "<td class='center'><span class='available'> YES </span></td></tr>";
				output += "</tr>";

				count++;
			}

			// Output result
			document.getElementById("rooms-found").innerHTML = count;
			document.getElementById("table-result").innerHTML = output;

			// add show class to result id.
			document.getElementById("result").className = "result show";
		};
		
	</script>
</head>
<body>
	<!-- Main Container -->
	<section class="container">

		<!-- Andela Logo -->
		<div class="logo">
			<img src="img/andela.png" alt="Andela Logo" width="350">
		</div>
		<!-- /.Andela Logo -->

		<!-- Search Room -->
		<div class="search-room bg-gray show">
			<!-- Rooms -->

			<div id="rooms" class="rooms">
				<form id="my-form" action="#">
						
					<label for="find-rooms">Select Room</label>
					<select name="find-rooms" id="find-rooms">
						<option value="meetings"> Meeting</option>
						<option value="games"> Games</option>
						<option value="quiet_time"> Quiet Time</option>
						<option value="learning"> Learning</option>
						<option value="working"> Working</option>
					</select>

					<button id="search" name="search" type="button" onclick="getAvailableRoom()">Search</button>
				</form>
			</div>
			<!-- /.Rooms -->
		</div>
		<!-- /.Search Room -->
	

		<!-- Result -->
		<div id="result" class="result">
			<div class="rooms-result">
				<h3>Results</h3>
				<p>No of Rooms Found : <span id="rooms-found"></span></p>
			</div>
			<div>
				
				<table id="table-result" class="search-result"></table>
			</div>
		</div>
		<!-- /.Result -->

	</section> 
	<!-- /.Main Container -->

</body>
</html>	